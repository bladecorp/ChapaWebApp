<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="content">

		<h:form id="form">
			<p:growl id="growl" autoUpdate="true" showDetail="false" />

			<div class="row">


				<!--  FILA 1 COLUMNA 1 -->

				<div class="col-lg-4">
					<div class="row">
					<div class="col-lg-12">
						<div class="panel panel-primary">
							<div class="panel-heading">
								<h3 class="panel-title">AGREGAR USUARIO</h3>
							</div>
							<div class="panel-body">
							<p:fragment>
								<p:panelGrid id="pnlAgregarUsuario">
									<div class="form-horizontal">
										<div class="form-group">
											<h:outputLabel value="Usuario"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputUsername" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.usuario.username}" />
													<span class="input-group-addon"><i class="fa fa-user"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Password"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputPassword" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.usuario.password}" />
													<span class="input-group-addon"><i class="fa fa-lock"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Nombre"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputNombre" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.usuario.nombre}" />
													<span class="input-group-addon"><i class="fa fa-user"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Paterno"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputPaterno" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.usuario.apaterno}" />
													<span class="input-group-addon"><i class="fa fa-user" ></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Materno"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputMaterno" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.usuario.amaterno}" />
													<span class="input-group-addon"><i class="fa fa-user"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Email"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputEmail" styleClass="form-control"
														style="text-align:center;"
														value="#{adminView.email}" />
													<span class="input-group-addon"><i class="fa fa-lock"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Cliente"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<h:selectOneMenu id="inputCliente" styleClass="form-control"
													value="#{adminView.usuario.idCliente}">
													<f:selectItems value="#{adminView.clientes}" var="cliente"
														itemLabel="#{cliente.nombre}" itemValue="#{cliente.id}" />
												</h:selectOneMenu>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Tipo"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<h:selectOneMenu styleClass="form-control"
													value="#{adminView.usuario.idTipousuario}">
													<f:selectItems value="#{adminView.tiposUsuario}" var="tipo"
														itemLabel="#{tipo.tipo}" itemValue="#{tipo.id}" />
												</h:selectOneMenu>
											</div>
										</div>
										<div class="form-group" style="margin-top: 35px;">
											<p:outputLabel styleClass="control-label col-sm-3" />
											<div class=" col-sm-7">
												<p:commandButton value="AGREGAR"
													styleClass="btn btn-primary form-control"
													action="#{adminView.guardarUsuario}" 
													update="dtUsuarios, inputUsername, inputPassword, inputEmail, inputNombre, inputPaterno, inputMaterno" 
													onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
											</div>
										</div>

									</div>
								</p:panelGrid>
							</p:fragment>
							</div>
						</div>
						</div>
					</div>

					<!-- FILA 2 COLUMNA 1 -->
					<div class="row">
					<div class="col-lg-12">
						<div class="panel panel-primary">
							<div class="panel-heading">
								<h3 class="panel-title">CLIENTE</h3>
							</div>
							<div class="panel-body">
							<p:fragment>
								<p:panelGrid id="pnlAgregarCliente">
									<div class="form-horizontal">
										<div class="form-group">
											<h:outputLabel value="Cliente"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<h:selectOneMenu id="slctClienteDef" styleClass="form-control"
													value="#{adminView.idClienteTemp}">
													<p:ajax event="change" 
														listener="#{adminView.cambioClienteAct}" 
														update="inputClienteNombre, inputClienteImagen, slctWialon, maxMasters, maxUnidades, maxChoferes, maxOperadores, maxSupervisores, inputVigencia" 
														onstart="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
													<f:selectItems value="#{adminView.clientes}" var="cliente"
														itemLabel="#{cliente.nombre} - #{cliente.id-1}" itemValue="#{cliente.id}" />
												</h:selectOneMenu>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Nombre"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputClienteNombre"
														styleClass="form-control" style="text-align:center;"
														value="#{adminView.clienteAct.nombre}" />
													<span class="input-group-addon"><i class="fa fa-building"></i></span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Imagen"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group">
													<p:inputText id="inputClienteImagen"
														styleClass="form-control" style="text-align:center;"
														value="#{adminView.clienteAct.logo}" />
													<span class="input-group-addon"><i class="fa fa-picture-o"></i>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Wialon"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group" style="width:100%;">
													<h:selectOneMenu id="slctWialon" value="#{adminView.clienteAct.iswialon}" styleClass="form-control" >
														<f:selectItem itemLabel="TIENE WIALON" itemValue="true" />
														<f:selectItem itemLabel="NO TIENE WIALON" itemValue="false" />
													</h:selectOneMenu>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Vigencia Password"
												styleClass="control-label col-sm-3" />
											<div class="col-sm-9">
												<div class="input-group" style="width:100%;">
													<p:inputText id="inputVigencia" value="#{adminView.clienteAct.periodovalidacion}" 
													decimalPlaces="0" minValue="0" styleClass="form-control" style="text-align:center;" />
													<span class="input-group-addon">DÃ­as</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Masters"
												styleClass="control-label col-xs-3" />
											<div class="col-xs-5">
												<div class="input-group" style="width:100%;">
													<p:inputText id="maxMasters" value="#{adminView.clienteAct.maxmasters}" styleClass="form-control" disabled="true"/>
													<span class="input-group-addon">cuentas</span>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-success form-control" icon="fa fa-plus" action="#{adminView.sumarCantidad(5)}" update="maxMasters"/>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-danger form-control" icon="fa fa-minus" action="#{adminView.restarCantidad(5)}" update="maxMasters"/>
												</div>
											</div>
											
										</div>
										<div class="form-group">
											<h:outputLabel value="Operadores"
												styleClass="control-label col-xs-3" />
											<div class="col-xs-5">
												<div class="input-group" style="width:100%;">
													<p:inputText id="maxOperadores" value="#{adminView.clienteAct.maxoperadores}" styleClass="form-control" disabled="true"/>
													<span class="input-group-addon">cuentas</span>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-success form-control" icon="fa fa-plus" action="#{adminView.sumarCantidad(1)}" update="maxOperadores"/>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-danger form-control" icon="fa fa-minus" action="#{adminView.restarCantidad(1)}" update="maxOperadores"/>
												</div>
											</div>
											
										</div>
										<div class="form-group">
											<h:outputLabel value="Supervisores"
												styleClass="control-label col-xs-3" />
											<div class="col-xs-5">
												<div class="input-group" style="width:100%;">
													<p:inputText id="maxSupervisores" value="#{adminView.clienteAct.maxsupervisores}" styleClass="form-control" disabled="true"/>
													<span class="input-group-addon">cuentas</span>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-success form-control" icon="fa fa-plus" action="#{adminView.sumarCantidad(2)}" update="maxSupervisores"/>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-danger form-control" icon="fa fa-minus" action="#{adminView.restarCantidad(2)}" update="maxSupervisores"/>
												</div>
											</div>
											
										</div>
										
										<div class="form-group">
											<h:outputLabel value="Choferes"
												styleClass="control-label col-xs-3" />
											<div class="col-xs-5">
												<div class="input-group" style="width:100%;">
													<p:inputText id="maxChoferes" value="#{adminView.clienteAct.maxchoferes}" styleClass="form-control" disabled="true"/>
													<span class="input-group-addon">cuentas</span>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-success form-control" icon="fa fa-plus" action="#{adminView.sumarCantidad(3)}" update="maxChoferes"/>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-danger form-control" icon="fa fa-minus" action="#{adminView.restarCantidad(3)}" update="maxChoferes"/>
												</div>
											</div>
										</div>
										<div class="form-group">
											<h:outputLabel value="Unidades"
												styleClass="control-label col-xs-3" />
											<div class="col-xs-5">
												<div class="input-group" style="width:100%;">
													<p:inputText id="maxUnidades" value="#{adminView.clienteAct.maxunidades}" styleClass="form-control" disabled="true"/>
													<span class="input-group-addon">cuentas</span>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-success form-control" icon="fa fa-plus" action="#{adminView.sumarCantidad(4)}" update="maxUnidades"/>
												</div>
											</div>
											<div class="col-xs-2">
												<div class="input-group" style="width:100%;">
													<p:commandButton styleClass="btn btn-danger form-control" icon="fa fa-minus" action="#{adminView.restarCantidad(4)}" update="maxUnidades"/>
												</div>
											</div>
											
										</div>
										
										<div class="form-group" style="margin-top: 35px;">
											<div class="col-xs-offset-1 col-xs-5">
												<p:commandButton value="ACTUALIZAR"
													update="inputCliente, inputClienteNombre, inputClienteImagen, 
														inputClienteSel, slctClienteDef"
													styleClass="btn btn-success form-control"
													action="#{adminView.actualizarCliente}" 
													onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
											</div>
											<div class="col-xs-5">
												<p:commandButton value="AGREGAR"
													update="inputCliente, inputClienteNombre, inputClienteImagen, 
														inputClienteSel, slctClienteDef"
													styleClass="btn btn-primary form-control"
													action="#{adminView.guardarCliente}" 
													onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
											</div>
										</div>
									</div>
								</p:panelGrid>
								</p:fragment>
							</div>
						</div>
						</div>
					</div>
					
				</div>

				<!-- FILA 1 COLUMNA 2 -->
				<div class="col-lg-5">
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-primary">
								<div class="panel-heading">
									<h3 class="panel-title">CUENTAS</h3>
								</div>
								<div class="panel-body">
								<p:fragment>
									<p:panel styleClass="noBorder">
										<div class="form-horizontal">
											<div class="form-group">
												<h:outputLabel value="Cliente"
													styleClass="control-label col-sm-2" />
												<div class="col-sm-10">
													<h:selectOneMenu id="inputClienteSel" styleClass="form-control"
														value="#{adminView.clienteSel}">
														<p:ajax event="change" update="dtUsuarios,form:editUsername, form:editPass, 
														form:editEmail, form:editNombre, form:editPaterno, form:editMaterno"
															listener="#{adminView.cambioCliente}"  
															onstart="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
														<f:selectItems value="#{adminView.clientes}" var="cliente"
															itemLabel="#{cliente.nombre} - #{cliente.id-1}" itemValue="#{cliente.id}" />
													</h:selectOneMenu>
												</div>
											</div>
										</div>
										<p:dataTable id="dtUsuarios" paginator="true" rows="9"
											paginatorTemplate="{PageLinks} {RowsPerPageDropdown}"
                         					rowsPerPageTemplate="9,15,20"
											paginatorPosition="bottom" value="#{adminView.usuarios}"
											var="user" reflow="true" selectionMode="single" 
											selection="#{adminView.usuarioSel}" rowKey="#{user.username}">
											<p:ajax event="rowSelect" listener="#{adminView.obtenerCorreos}"
												update="form:editUsername, form:editPass, form:editEmail, form:editTipo, 
													form:editEstado, form:editNombre, form:editPaterno, form:editMaterno" 
												onstart="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
											<p:column headerText="Usuario" style="text-align:center;">
												<h:outputText value="#{user.username}" />
											</p:column>
											<p:column headerText="Tipo" style="text-align:center;">
												<h:outputText
													value="#{user.idTipousuario==1?'Admin':user.idTipousuario==2?'Supervisor':user.idTipousuario==3?'Operador':'Master'}" />
											</p:column>
											<p:column headerText="Estado" style="text-align:center;">
												<h:outputText value="#{user.enabled?'Activo':'Inactivo'}"
													style="color:#{user.enabled?'green':'red'}" />
											</p:column>

										</p:dataTable>
									</p:panel>
									<div class="col-lg-6 col-sm-6 col-xs-6"> <!-- col-lg-offset-1 -->
										<div class="form-group" style="text-align:center;">
											<p:commandButton value="DESHABILITAR" 
														styleClass="btn btn-danger form-control" 
														action="#{adminView.cambiarEstatusCuentas(false)}" update="dtUsuarios"
														onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
										</div>
									</div>
									<div class="col-lg-6 col-sm-6 col-xs-6">
										<div class="form-group" style="text-align:center;">
											<p:commandButton value="HABILITAR" 
														styleClass="btn btn-success form-control" 
														action="#{adminView.cambiarEstatusCuentas(true)}" update="dtUsuarios"
														onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()"/>
										</div>
									</div>
								</p:fragment>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				
				<!-- FILA 1 COLUMNA 3 -->
				<div class="col-lg-3">
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-primary">
								<div class="panel-heading">
									<div class="panel-title"> USUARIO </div>
								</div>
								<div class="panel-body">
								<p:fragment>
									<p:panelGrid id="pnlUserEdit" styleClass="noBorder">
										<div class="form">
											
											<div class="form-group">
												<h:outputText value="Usuario" />
												<p:inputText id="editUsername" value="#{adminView.usuarioSel.username}" 
														styleClass="form-control" disabled="true"/>
											</div>
											<div class="form-group">
												<h:outputText value="Password" />
												<p:inputText id="editPass" value="#{adminView.usuarioSel.password}" styleClass="form-control"/>
											</div>
											<div class="form-group">
												<h:outputText value="Nombre" />
												<p:inputText id="editNombre" value="#{adminView.usuarioSel.nombre}" styleClass="form-control"/>
											</div>
											<div class="form-group">
												<h:outputText value="Paterno" />
												<p:inputText id="editPaterno" value="#{adminView.usuarioSel.apaterno}" styleClass="form-control"/>
											</div>
											<div class="form-group">
												<h:outputText value="Materno" />
												<p:inputText id="editMaterno" value="#{adminView.usuarioSel.amaterno}" styleClass="form-control"/>
											</div>
											<div class="form-group">
												<h:outputText value="Email" />
												<p:inputText id="editEmail" value="#{adminView.emailSel}" styleClass="form-control"/>
											</div>
											<div class="form-group">
												<h:outputText value="Tipo" />
												<h:selectOneMenu id="editTipo" styleClass="form-control" 
														value="#{adminView.usuarioSel.idTipousuario}">
													<f:selectItems value="#{adminView.tiposUsuario}" var="tipo"
															itemLabel="#{tipo.tipo}" itemValue="#{tipo.id}" />
												</h:selectOneMenu>
											</div>
											<div class="form-group">
												<h:outputText value="Estado" />
												<h:selectOneMenu id="editEstado" styleClass="form-control" 
														value="#{adminView.usuarioSel.enabled}" >
													<f:selectItem itemLabel="Activo" itemValue="true"/>
													<f:selectItem itemLabel="Inactivo" itemValue="false"/>
												</h:selectOneMenu>
											</div>
											<div class="form-group">
												<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
													<p:commandButton action="#{adminView.eliminarUsuario}" styleClass="btn btn-danger form-control"
														update="dtUsuarios, form:editUsername, form:editPass, form:editEmail" icon="fa fa-trash"
														onclick="PF('statusDialog').show()"  oncomplete="PF('statusDialog').hide()">
													</p:commandButton>
												</div>
												<div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
													<p:commandButton value="ACTUALIZAR" action="#{adminView.actualizarUsuario}"
													styleClass="btn btn-success btn-block form-control" 
													update="dtUsuarios" onclick="PF('statusDialog').show()"  
													oncomplete="PF('statusDialog').hide()"/>
												</div>
											</div>
										</div>
					
									</p:panelGrid>
									</p:fragment>
								</div>
							</div>
						</div>
					</div>
				</div><!-- .FIN COLUMNA 3 -->

			</div>
			<!-- FIN DEL ROW PRINCIPAL -->
		</h:form>

	</ui:define>

</ui:composition>